import React, { ReactNode } from 'react';
import PropTypes from 'prop-types';
import { useTranslation } from 'react-i18next';
import classNames from 'classnames';

import NavBar from '../NavBar';
import Svg from '../Svg';
import Icon from '../Icon';
import IconButton from '../IconButton';
import Dropdown from '../Dropdown';
import HeaderPatientInfo from '../HeaderPatientInfo';
import { PatientInfoVisibility } from '../../types/PatientInfoVisibility';

import NeuronLogo from '../../assets/svgs/neuron-logo.svg';

function Header({
  children,
  menuOptions,
  isReturnEnabled,
  onClickReturnButton,
  isSticky,
  WhiteLabeling,
  showPatientInfo = PatientInfoVisibility.VISIBLE_COLLAPSED,
  servicesManager,
  ...props
}): ReactNode {
  const { t } = useTranslation('Header');

  // TODO: this should be passed in as a prop instead and the react-router-dom
  // dependency should be dropped
  const onClickReturn = () => {
    if (isReturnEnabled && onClickReturnButton) {
      onClickReturnButton();
    }
  };

  return (
    <NavBar
      isSticky={isSticky}
      {...props}
      className="flex items-center justify-between"
    >
      <div className="flex h-[58px] items-center justify-center">
        <div
          className={classNames(
            'mr-3 inline-flex items-center justify-center',
            isReturnEnabled && 'cursor-pointer'
          )}
          onClick={onClickReturn}
          data-cy="return-to-work-list"
        >
          {isReturnEnabled && (
            <Icon
              name="chevron-left"
              className="text-primary-active w-8"
            />
          )}
          <div className="ml-1 pl-1">
            {WhiteLabeling?.createLogoComponentFn?.(React, props) || (
              <svg
                width="100"
                height="31"
                viewBox="0 0 100 31"
                fill="none"
                xmlns="http://www.w3.org/2000/svg"
              >
                <g clip-path="url(#clip0_9_1741)">
                  <path
                    d="M26.9009 13.9659C26.9009 13.1677 26.256 12.5205 25.4606 12.5205C24.8618 12.5205 24.349 12.8872 24.1325 13.4096C23.8822 13.9659 23.3632 14.4467 22.0427 14.4467C19.2575 14.4467 17.005 10.6004 17.005 4.57518C17.005 2.04797 14.9644 0 12.4463 0C9.92814 0 7.88754 2.04797 7.88754 4.57518C7.88754 4.58597 7.88754 4.59675 7.88754 4.606C7.88754 9.86075 6.59163 12.9119 3.22903 14.2156C1.36193 14.7765 0 16.5132 0 18.5704C0 21.0807 2.02678 23.1148 4.52801 23.1148C7.02923 23.1148 9.05601 21.0807 9.05601 18.5704C9.05601 13.7625 10.6114 10.2537 12.4601 10.1135C15.7183 9.86538 18.4421 13.7317 18.4421 18.5411C18.4421 20.5351 20.0528 22.1532 22.0412 22.1532C24.0296 22.1532 25.6403 20.5367 25.6403 18.5411C25.6403 18.4517 25.6357 18.3624 25.6295 18.2745C25.5635 16.6996 25.5128 16.0355 26.4679 14.9984C26.735 14.7364 26.9009 14.3712 26.9009 13.9659Z"
                    fill="#3055FB"
                  />
                  <path
                    d="M35.3627 5.53829C35.3627 3.54426 33.752 1.92622 31.7636 1.92622C29.7752 1.92622 28.1645 3.54272 28.1645 5.53829C28.1645 5.62767 28.1691 5.71704 28.1753 5.80488C28.2413 7.37976 28.292 8.04393 27.3369 9.08101C27.0698 9.34298 26.9039 9.70819 26.9039 10.1135C26.9039 10.9117 27.5488 11.5589 28.3442 11.5589C28.8939 11.5589 29.3714 11.2492 29.614 10.7946C30.3295 9.59262 30.9867 9.45239 32.4852 9.07793C32.5835 9.0579 32.6787 9.03324 32.7739 9.0055H32.7816C34.2725 8.5617 35.3611 7.17944 35.3611 5.53983L35.3627 5.53829Z"
                    fill="white"
                  />
                  <path
                    d="M54.7845 15.6626C54.5818 14.9398 54.2532 14.288 53.8095 13.724C53.3657 13.16 52.8176 12.71 52.1804 12.3864C51.5447 12.0628 50.8353 11.8979 50.0707 11.8979C49.3981 11.8979 48.7563 12.0335 48.1637 12.3017C47.5694 12.5698 47.0412 12.9473 46.5944 13.422C46.1461 13.8981 45.7899 14.456 45.535 15.0831C45.2801 15.7088 45.1511 16.3899 45.1511 17.1049C45.1511 18.0572 45.3753 18.9387 45.816 19.7246C46.2582 20.512 46.857 21.1469 47.5986 21.6123C48.3387 22.0777 49.1709 22.3134 50.0722 22.3134C51.0518 22.3134 51.947 22.033 52.7362 21.4798C53.5008 20.9435 54.0904 20.2485 54.4897 19.4149L52.145 18.8663C51.9117 19.2145 51.6184 19.4965 51.276 19.703C50.9152 19.9203 50.5052 20.0266 50.0707 20.0205C49.6469 20.0143 49.2615 19.9172 48.9252 19.7354C48.5905 19.5535 48.3095 19.307 48.09 19.0003C47.8719 18.6968 47.7138 18.3485 47.6186 17.9663L47.594 17.8708H54.9319C55.0317 17.1065 54.9825 16.3637 54.7845 15.661V15.6626ZM47.5172 16.1896L47.5372 16.0971C47.6263 15.681 47.7936 15.3004 48.0347 14.9691C48.2773 14.6378 48.5752 14.3697 48.9237 14.1755C49.2738 13.9798 49.6592 13.8796 50.0707 13.8796C50.4822 13.8796 50.8706 13.9813 51.2269 14.1801C51.5815 14.3789 51.884 14.647 52.1266 14.9799C52.3692 15.3128 52.5289 15.6888 52.6057 16.1002L52.6226 16.1911H47.5188L47.5172 16.1896Z"
                    fill="white"
                  />
                  <path
                    d="M58.3574 21.808C58.9424 22.1563 59.5981 22.3335 60.3074 22.3335C60.8341 22.3335 61.3346 22.2287 61.7953 22.0237C62.2574 21.8188 62.6628 21.5352 63.0006 21.1824L63.1311 21.0468L63.1419 22.0715H65.4281L65.4189 12.1953H63.1342V17.7953C63.1342 18.2021 63.0328 18.5781 62.8332 18.9125C62.6336 19.2469 62.3665 19.515 62.0363 19.7123C61.7062 19.9095 61.33 20.0097 60.917 20.0097C60.504 20.0097 60.1477 19.9095 59.813 19.7138C59.4798 19.5181 59.2111 19.2484 59.0115 18.914C58.8119 18.5796 58.7106 18.2036 58.7106 17.7968V12.1969H56.4258V18.4394C56.4258 19.1575 56.6024 19.817 56.9494 20.4011C57.298 20.9851 57.7709 21.4597 58.3574 21.8095V21.808Z"
                    fill="white"
                  />
                  <path
                    d="M70.5995 14.5376C70.9326 14.3404 71.3073 14.2418 71.7126 14.2418C71.9552 14.2418 72.2025 14.2865 72.4451 14.3758L73.9759 12.2971C73.3801 12.0181 72.7245 11.9164 72.333 11.9164C71.8002 11.9164 71.2965 12.0212 70.8344 12.2262C70.3722 12.4311 69.9715 12.7147 69.6398 13.066L69.5093 13.2047L69.4985 12.1969H67.2123L67.2215 22.0731H69.5062V16.4531C69.5062 16.0463 69.606 15.6703 69.801 15.3359C69.996 15.0015 70.2647 14.7318 70.5979 14.5361L70.5995 14.5376Z"
                    fill="white"
                  />
                  <path
                    d="M80.8531 12.5975C80.113 12.1322 79.2808 11.8964 78.381 11.8964C77.7085 11.8964 77.0667 12.032 76.474 12.3001C75.8798 12.5683 75.3516 12.9458 74.9048 13.4204C74.4564 13.8966 74.1002 14.4544 73.8453 15.0816C73.5905 15.7072 73.4615 16.3914 73.4615 17.1142C73.4615 18.0665 73.6857 18.9464 74.1263 19.7292C74.5685 20.5136 75.1674 21.1469 75.909 21.6123C76.6491 22.0777 77.4813 22.3134 78.3826 22.3134C79.0612 22.3134 79.7046 22.1778 80.2942 21.9097C80.8853 21.6416 81.412 21.264 81.8588 20.7879C82.3071 20.3132 82.6634 19.7554 82.9183 19.1313C83.1731 18.5088 83.3021 17.8292 83.3021 17.1142C83.3021 16.1557 83.0779 15.2711 82.6373 14.4837C82.1966 13.6963 81.5962 13.0614 80.8546 12.596L80.8531 12.5975ZM80.6719 18.5565C80.4431 18.9942 80.1268 19.3517 79.7322 19.6183C79.3345 19.8864 78.88 20.022 78.3795 20.022C77.9066 20.022 77.4644 19.891 77.0636 19.6337C76.6644 19.3763 76.3404 19.025 76.104 18.5873C75.866 18.1497 75.7447 17.655 75.7447 17.1157C75.7447 16.5764 75.8614 16.1094 76.0932 15.6656C76.3251 15.2218 76.6429 14.8612 77.0375 14.5947C77.4352 14.3265 77.8866 14.1909 78.3795 14.1909C78.8724 14.1909 79.3054 14.325 79.7061 14.59C80.1053 14.8535 80.4262 15.211 80.6612 15.6518C80.8961 16.0925 81.0158 16.5856 81.0158 17.1172C81.0158 17.6489 80.9007 18.1204 80.6719 18.5581V18.5565Z"
                    fill="white"
                  />
                  <path
                    d="M88.1234 14.5376C88.4566 14.3404 88.8312 14.2418 89.2366 14.2418C89.6419 14.2418 90.0166 14.3419 90.3498 14.5376C90.683 14.7333 90.9517 15.003 91.1513 15.3374C91.3509 15.6733 91.4522 16.0493 91.4522 16.4546V22.0746H93.737V15.812C93.737 15.0939 93.5604 14.4344 93.2134 13.8504C92.8648 13.2663 92.3919 12.7917 91.8054 12.4434C91.2204 12.0952 90.5647 11.918 89.8554 11.918C89.3226 11.918 88.8189 12.0228 88.3568 12.2277C87.8946 12.4327 87.4939 12.7162 87.1622 13.0675L87.0317 13.2062L87.0209 12.1984H84.7347L84.7439 22.0746H87.0286V16.4546C87.0286 16.0478 87.1284 15.6718 87.3234 15.3374C87.5184 15.003 87.7871 14.7333 88.1203 14.5376H88.1234Z"
                    fill="white"
                  />
                  <path
                    d="M37.9821 14.5361C38.3153 14.3389 38.69 14.2402 39.0953 14.2402C39.5007 14.2402 39.8753 14.3404 40.2085 14.5361C40.5417 14.7318 40.8104 15.0015 41.01 15.3359C41.2096 15.6718 41.311 16.0478 41.311 16.4531V22.0731H43.5957V15.8105C43.5957 15.0924 43.4191 14.4329 43.0721 13.8488C42.7236 13.2648 42.2507 12.7902 41.6641 12.4404C41.0791 12.0921 40.4235 11.9149 39.7141 11.9149C39.1813 11.9149 38.6777 12.0197 38.2171 12.2246C37.7564 12.4296 37.3542 12.7131 37.0225 13.0645L36.892 13.2031L36.8812 12.1953H34.595L34.6042 22.0715H36.8889V16.4515C36.8889 16.0447 36.9887 15.6687 37.1853 15.3343C37.3803 14.9999 37.649 14.7318 37.9821 14.5346V14.5361Z"
                    fill="white"
                  />
                  <path
                    d="M65.4449 30.7349V24.6373H64.146V26.8162H61.9887V24.6373H60.6897V30.7349H61.9887V28.1199H64.146V30.7349H65.4449Z"
                    fill="white"
                  />
                  <path
                    d="M71.0923 25.9409V24.6373H67.2214V30.7349H71.0923V29.4297H68.522V28.1199H70.5011V26.8162H68.522V25.9409H71.0923Z"
                    fill="white"
                  />
                  <path
                    d="M76.4433 29.7764L76.7903 30.7349H78.1676L75.9627 24.6373H74.4979L72.293 30.7349H73.6703L74.0173 29.7764H76.4417H76.4433ZM75.2257 26.4433L75.9657 28.4712H74.4933L75.2257 26.4433Z"
                    fill="white"
                  />
                  <path
                    d="M79.2163 24.6373V30.7349H82.9044V29.4297H80.5153V24.6373H79.2163Z"
                    fill="white"
                  />
                  <path
                    d="M87.8317 24.6373H83.058V25.9409H84.7946V30.7349H86.0951V25.9409H87.8317V24.6373Z"
                    fill="white"
                  />
                  <path
                    d="M92.4364 24.6373V26.8162H90.2791V24.6373H88.9802V30.7349H90.2791V28.1199H92.4364V30.7349H93.7369V24.6373H92.4364Z"
                    fill="white"
                  />
                </g>
                <defs>
                  <clipPath id="clip0_9_1741">
                    <rect
                      width="100"
                      height="30.8197"
                      fill="white"
                    />
                  </clipPath>
                </defs>
              </svg>
            )}
          </div>
        </div>
      </div>
      {/* <div className="absolute top-1/2 left-[211px]  h-8 w-20 -translate-y-1/2">{future left component}</div> */}
      <div className="flex items-center justify-center space-x-2">{children}</div>
      <div className="flex items-center pr-1">
        {(showPatientInfo === PatientInfoVisibility.VISIBLE ||
          showPatientInfo === PatientInfoVisibility.VISIBLE_COLLAPSED) && (
          <HeaderPatientInfo servicesManager={servicesManager} />
        )}
        <div className="border-primary-dark mx-1.5 h-[25px] border-r"></div>
      </div>
    </NavBar>
  );
}

Header.propTypes = {
  menuOptions: PropTypes.arrayOf(
    PropTypes.shape({
      title: PropTypes.string.isRequired,
      icon: PropTypes.string,
      onClick: PropTypes.func.isRequired,
    })
  ),
  children: PropTypes.oneOfType([PropTypes.node, PropTypes.func]),
  isReturnEnabled: PropTypes.bool,
  isSticky: PropTypes.bool,
  onClickReturnButton: PropTypes.func,
  WhiteLabeling: PropTypes.object,
  showPatientInfo: PropTypes.string,
  servicesManager: PropTypes.object,
};

Header.defaultProps = {
  isReturnEnabled: true,
  isSticky: false,
};

export default Header;
